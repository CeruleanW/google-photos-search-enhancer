(this["webpackJsonpgoogle-photos-search-enhancer"]=this["webpackJsonpgoogle-photos-search-enhancer"]||[]).push([[0],{107:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(13),c=n.n(o),i=(n(99),n(10)),s=n(2),l=r.a.createContext(),u=r.a.createContext();function d(){return Object(a.useContext)(l)}function h(){return Object(a.useContext)(u)}function p(e){var t=e.children,n=Object(a.useState)(""),r=Object(i.a)(n,2),o=r[0],c=r[1],d=Object(a.useState)(!1),h=Object(i.a)(d,2),p=h[0],j=h[1];return Object(s.jsx)(l.Provider,{value:{accessToken:o,isLogined:p},children:Object(s.jsx)(u.Provider,{value:{handleAccessToken:function(e){c(e)},handleIsLogined:function(e){j(e)}},children:t})})}var j=n(162),b=r.a.createContext(),g=r.a.createContext();function f(){return Object(a.useContext)(b)}function m(){return Object(a.useContext)(g)}function O(e){var t=e.children,n=Object(a.useState)(!1),r=Object(i.a)(n,2),o=r[0],c=r[1],l=Object(a.useState)(""),u=Object(i.a)(l,2),d=u[0],h=u[1],p=Object(a.useState)(!1),j=Object(i.a)(p,2),f=j[0],m=j[1],O=Object(a.useState)(!1),x=Object(i.a)(O,2),v=x[0],y=x[1];return Object(s.jsx)(b.Provider,{value:{isBackdropOpened:o,textMessage:d,isSearching:f,isNoMatch:v},children:Object(s.jsx)(g.Provider,{value:{handleBackdrop:function(e){c(e)},handleTextMessage:function(e){h(e)},handleIsSearching:function(e){m(e)},handleIsNoMatch:function(e){y(e)}},children:t})})}var x=n(73),v=n(144),y=n(49),w=n(143),k=Object(w.a)({footerLink:{"&:visited":{color:"blueviolet"}}});function S(){var e=k();return Object(s.jsx)(x.a,{bottomThreshold:50,normalStyles:{backgroundColor:"#1b2024",padding:"1rem",color:"rgb(192 192 192)",font:"300 0.9rem 'Lora', serif"},stickyStyles:{backgroundColor:"rgba(255,255,255,.8)",padding:"1rem",font:"300 1rem 'Lora', serif"},children:Object(s.jsx)(v.a,{children:Object(s.jsxs)(y.a,{align:"center",children:[" ","Copyright \xa9 2020 Developed with \u2764\ufe0f by",Object(s.jsxs)("a",{className:e.footerLink,href:"https://github.com/CeruleanW",children:[" ","Yi Yang"]})]})})})}var C=r.a.createContext(),I=r.a.createContext();function T(){return Object(a.useContext)(C)}function N(){return Object(a.useContext)(I)}function L(e){var t=e.children,n=Object(a.useState)([]),r=Object(i.a)(n,2),o=r[0],c=r[1],l=Object(a.useState)([]),u=Object(i.a)(l,2),d=u[0],h=u[1];return Object(s.jsx)(C.Provider,{value:{photoUrls:o,searchedIds:d},children:Object(s.jsx)(I.Provider,{value:{handlePhotoUrls:function(e){c(e)},handleSearchedIds:function(e){h(e)}},children:t})})}var P=n(15),U=n(25),D=n(20),B=n(78),M=n.n(B),A=n(145),F=Object(w.a)((function(e){var t;return{menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},title:(t={},Object(P.a)(t,e.breakpoints.down("xs"),{fontSize:"1rem"}),Object(P.a)(t,e.breakpoints.up("lg"),{fontSize:"1.2rem"}),t)}}));function W(e){var t=e.setIsDrawerOpen,n=e.clsx,a=e.isDrawerOpen,r=F();return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(A.a,{color:"inherit","aria-label":"open drawer",onClick:function(){return t(!0)},edge:"start",className:n(r.menuButton,a&&r.hide),children:Object(s.jsx)(M.a,{})}),Object(s.jsx)(y.a,{variant:"h6",className:r.title,children:"Google Photos Search Enhancer"})]})}var G=n(154),_=n(81),E=n.n(_),R=n(82),z=n.n(R),H=n(148),q=n(167),J=n(65),Y=n(79),V=n(14),K=n.n(V),$=n(22),Q=n(84),X=n(66),Z=function(){var e=Object(Q.a)("db",1,{upgrade:function(e){e.createObjectStore("localMediaItems",{keyPath:"id",autoIncrement:!0})}});return ee(),e}();function ee(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e?localStorage.setItem("updateTime",new Date):localStorage.setItem("updateTime","")}function te(){return localStorage.getItem("updateTime")}function ne(e){return ae.apply(this,arguments)}function ae(){return(ae=Object($.a)(K.a.mark((function e(t){var n,a;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z;case 2:n=e.sent,a=n.transaction("localMediaItems","readwrite"),t.forEach((function(e){return new Promise((function(t,n){t(a.store.put(e))})).catch((function(e){console.log("Error: failed to store data in IndexedDB"+e)}))}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(){return(re=Object($.a)(K.a.mark((function e(){var t;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z;case 2:return t=e.sent,e.abrupt("return",t.clear("localMediaItems"));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(){return(oe=Object($.a)(K.a.mark((function e(t){var n,a,r,o,c,i,s;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Keyword:"+t),n=performance.now(),e.next=4,Z;case 4:return a=e.sent,e.next=7,a.getAll("localMediaItems");case 7:return r=e.sent,o={includeScore:!0,keys:["filename","description"]},c=new X.a(r,o),i=c.search(t),s=performance.now(),console.log("search function took ".concat(s-n," milliseconds.")),e.abrupt("return",i);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ce=(new AbortController).signal,ie=function(e){var t={};return Object.assign(t,{"Content-Type":"application/json"}),Object.assign(t,{Authorization:"Bearer ".concat(e)}),{headers:t,mode:"cors",signal:ce}},se=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{includeArchivedMedia:!0},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100,o=ie(e),c={filters:a,pageSize:r};return t&&Object.assign(c,{pageToken:t}),c=JSON.stringify(c),Object.assign(o,{method:n,mode:"cors",body:c}),o},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"https://photoslibrary.googleapis.com/v1/mediaItems",t=arguments.length>1?arguments[1]:void 0,n=e;return t&&(n+="?"+de(t)),n},ue=function(e,t){return"".concat(e,"?access_token=").concat(t)},de=function(e){return Object.keys(e).map((function(t){return t+"="+e[t]})).join("&")};function he(e){return pe.apply(this,arguments)}function pe(){return(pe=Object($.a)(K.a.mark((function e(t){var n,a,r,o,c,i=arguments;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"https://photoslibrary.googleapis.com/v1/mediaItems:search",a=i.length>2&&void 0!==i[2]?i[2]:"POST",e.prev=2,e.next=5,je(t,!1,n,a);case 5:o=e.sent;case 6:return(c=me(o))&&ne(c),r=o.nextPageToken,e.next=11,je(t,r,n,a);case 11:o=e.sent;case 12:if(r){e.next=6;break}case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),console.log(e.t0.name+": "+e.t0.message);case 18:return ee(new Date),e.abrupt("return",te());case 20:case"end":return e.stop()}}),e,null,[[2,15]])})))).apply(this,arguments)}function je(e){return be.apply(this,arguments)}function be(){return(be=Object($.a)(K.a.mark((function e(t){var n,a,r,o,c,i,s=arguments;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:"",a=s.length>2&&void 0!==s[2]?s[2]:"https://photoslibrary.googleapis.com/v1/mediaItems:search",r=s.length>3&&void 0!==s[3]?s[3]:"POST",o=le(a,{access_token:t}),c=se(t,n,r),i=fetch(o,c).then((function(e){return e.json()})).catch((function(e){return console.error(e)})),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(){return(ge=Object($.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ee(new Date),e.abrupt("return",te());case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(){return(fe=Object($.a)(K.a.mark((function e(t,n){var a,r,o;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.map((function(e){return"https://photoslibrary.googleapis.com/v1/mediaItems/".concat(e)})),r=a.map((function(e){return ue(e,n)})),o=r.map((function(e){return fetch(e).then((function(e){return e.json()}))})),e.next=5,Promise.all(o).then((function(e){return e.map((function(e){return{baseUrl:e.baseUrl,productUrl:e.productUrl}}))}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(e){return e.mediaItems?e.mediaItems.map((function(e){return{id:e.id,productUrl:e.productUrl,filename:e.filename,description:e.description}})):null}var Oe=n(146),xe={clientID:Y.a.client_id,projectId:"search-chinese-1595873063241",authUri:"https://accounts.google.com/o/oauth2/auth",tokenUri:"https://oauth2.googleapis.com/token",scopes:["https://www.googleapis.com/auth/photoslibrary","https://www.googleapis.com/auth/photoslibrary.readonly"]};function ve(e){var t=h().handleAccessToken,n=m().handleBackdrop,a=m().handleTextMessage,o=h().handleIsLogined,c=d().isLogined,i=function(t){console.log("handleRequest is called");window.gapi.auth2.getAuthInstance();te()?function(){return ge.apply(this,arguments)}().then((function(){e.onSetLastUpdateTime()})).finally((function(){n(!1),a("")})):(a("Initializing Local Data Storage. This may take long time depends the quantity of media items in your library"),n(!0),he(t).then((function(t){e.onSetLastUpdateTime()})).finally((function(){n(!1),a("")})))};return Object(s.jsx)(r.a.Fragment,{children:c?Object(s.jsx)(J.GoogleLogout,{clientId:xe.clientID,onLogoutSuccess:function(){o(!1),t("")},buttonText:"Logout",onFailure:function(e){alert("Failed to log out")},render:function(e){return Object(s.jsx)(Oe.a,{variant:"contained",onClick:e.onClick,disabled:e.disabled,children:"Logout"})},cookiePolicy:"single_host_origin"}):Object(s.jsx)(J.GoogleLogin,{clientId:xe.clientID,onSuccess:function(e){e.accessToken&&(o(!0),t(e.accessToken),i(e.accessToken))},onFailure:function(e){alert("Failed to log in")},cookiePolicy:"single_host_origin",responseType:"code,token",scope:xe.scopes[1],isSignedIn:!0,render:function(e){return Object(s.jsx)(Oe.a,{variant:"contained",onClick:e.onClick,disabled:e.disabled,children:"Login"})}})})}var ye=n(156),we=n(157),ke=n(158),Se=n(80),Ce=n.n(Se),Ie=n(165),Te=n(12),Ne=n(147),Le=Object(w.a)((function(e){return{search:Object(P.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(Te.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(Te.c)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0},e.breakpoints.up("md"),{marginBottom:e.spacing(0),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",marginRight:e.spacing(2)},inputInput:Object(P.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width")},e.breakpoints.up("md"),{width:"20ch"})}}));function Pe(){var e=Le(),t=d().accessToken,n=d().isLogined,r=N().handlePhotoUrls,o=m().handleIsSearching,c=N().handleSearchedIds,l=m().handleIsNoMatch,u=Object(a.useState)(""),h=Object(i.a)(u,2),p=h[0],j=h[1],b=function(){var e=performance.now();if(console.log("Search start: ".concat(e," milliseconds")),!p)return!1;o(!0),c([]),function(e){return oe.apply(this,arguments)}(p).then((function(e){var n=e.map((function(e){return e.item.id}));if(c(n),!n.length)return l(!0),"No result";o(!1),function(e,t){return fe.apply(this,arguments)}(n,t).then((function(e){console.log(e),r(e)}))})).catch((function(e){return console.log("Error: "+e)})).finally((function(){return o(!1)}))};return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)(Ne.a,{className:e.search,item:!0,xs:9,children:[Object(s.jsx)("div",{className:e.searchIcon,children:Object(s.jsx)(Ce.a,{})}),Object(s.jsx)(Ie.a,{placeholder:"Search\u2026",classes:{root:e.inputRoot,input:e.inputInput},inputProps:{"aria-label":"search"},onChange:function(e){j(e.target.value)},onKeyUp:function(e){13===e.keyCode&&(e.preventDefault(),b())},autoFocus:!0})]}),Object(s.jsx)(Ne.a,{item:!0,children:Object(s.jsx)(Oe.a,{variant:"contained",onClick:b,disabled:!n,children:"Search"})})]})}var Ue=n(155),De=n(153),Be=n(163),Me=n(166),Ae=n(4),Fe=n(28),We=n(164),Ge=n(112),_e=Object(w.a)((function(e){return{root:Object(P.a)({margin:"auto",marginTop:e.spacing(15),padding:e.spacing(2),maxWidth:"90%",backgroundColor:"white"},e.breakpoints.up("lg"),{maxWidth:"70%"}),title:{padding:e.spacing(1)},firstPara:{marginTop:e.spacing(2),padding:e.spacing(1)},body:{padding:e.spacing(1)},footNote:{marginTop:e.spacing(1)}}}));function Ee(e){var t=_e(),n=function(e){return Object(s.jsx)(y.a,{color:"textSecondary",className:t.body+" "+e.className,align:e.align,children:e.children})};return Object(s.jsx)(Ge.a,{open:e.open,onClose:e.onClose,children:Object(s.jsx)(v.a,{className:t.root,children:Object(s.jsxs)(Be.a,{children:[Object(s.jsx)(y.a,{color:"textPrimary",variant:"h4",className:t.title,children:"Google Photos Search Enhancer"}),Object(s.jsx)(H.a,{}),Object(s.jsxs)(Be.a,{children:[Object(s.jsx)(y.a,{color:"textSecondary",className:t.firstPara,children:"This app will help you to search through the descriptions and filenames in your Google Photos Library. Click the 'LOGIN' button to start!"}),Object(s.jsxs)("ul",{children:[Object(s.jsx)("li",{children:Object(s.jsxs)(n,{children:[Object(s.jsx)("strong",{children:"Data:"})," All data in this application are stored locally. None of them would be uploaded to any server."]})}),Object(s.jsx)("li",{children:Object(s.jsxs)(n,{children:[Object(s.jsx)("strong",{children:"Update:"})," Please click the 'Update' button to get the latest change in your Google Photos Library."]})}),Object(s.jsx)("li",{children:Object(s.jsxs)(n,{children:[Object(s.jsx)("strong",{children:"Edit:"})," Click the photo in the search result, then you can edit it in your Google Photos"]})})]})]}),Object(s.jsx)(H.a,{}),Object(s.jsx)(n,{align:"right",className:t.footNote,children:"For further help, please send email to yangyi621#outlook.com (replace # by @)"})]})})})}var Re=n(149),ze=n(150),He=n(151),qe=n(152);function Je(e){var t=function(t){return function(){e.onAgreed(t),e.onClose()}};return Object(s.jsxs)(Re.a,{open:e.open,onClose:t(!1),"aria-describedby":"alert-dialog-description",children:[Object(s.jsx)(ze.a,{children:Object(s.jsx)(He.a,{id:"alert-dialog-description",children:e.children})}),Object(s.jsxs)(qe.a,{children:[Object(s.jsx)(Oe.a,{onClick:t(!1),color:"primary",children:"Cancel"}),Object(s.jsx)(Oe.a,{onClick:t(!0),color:"primary",autoFocus:!0,children:"Confirm"})]})]})}var Ye=function(e){var t=new Date(e),n=function(e){e.length<2&&(e="0"+e)},a=""+(t.getMonth()+1),r=""+t.getDate(),o=t.getFullYear(),c=""+t.getHours(),i=""+t.getMinutes(),s=""+t.getSeconds();return n(a),n(r),n(c),n(i),n(s),"".concat(o,"-").concat(a,"-").concat(r," ").concat(c,":").concat(i,":").concat(s)};function Ve(){var e,t=240,n=Object(w.a)((function(e){return{appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(t,"px)"),marginLeft:t,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},drawer:{width:t,flexShrink:0},drawerPaper:{width:t},drawerHeader:Object(D.a)(Object(D.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),content:{flexGrow:1,padding:e.spacing(2)},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0},offset:e.mixins.toolbar}}))(),o=Object(Fe.a)();e=Object(De.a)(o.breakpoints.up("md"))?"flex-end":"center";var c=d().accessToken,l=d().isLogined,u=m(),h=Object(a.useState)(!1),p=Object(i.a)(h,2),j=p[0],b=p[1],g=Object(a.useState)(""),f=Object(i.a)(g,2),O=f[0],x=f[1],v=Object(a.useState)(!1),k=Object(i.a)(v,2),S=k[0],C=k[1],I=Object(a.useState)([]),T=Object(i.a)(I,2),N=T[0],L=T[1],B=Object(a.useState)(""),M=Object(i.a)(B,2),F=M[0],_=M[1],R=Object(a.useState)(void 0),J=Object(i.a)(R,2),Y=J[0],V=J[1],K=Object(a.useState)(!1),$=Object(i.a)(K,2),Q=$[0],X=$[1],Z=Object(a.useState)(!1),ne=Object(i.a)(Z,2),ae=ne[0],oe=ne[1],ce=Object(a.useState)(void 0),ie=Object(i.a)(ce,2),se=ie[0],le=ie[1];r.a.useEffect((function(){N.length?(_(N[0].message),V(N[0].severity),L((function(e){return e.slice(1)})),C(!0)):N.length&&F&&S&&C(!1)}),[N,F,S]),r.a.useEffect((function(){!0===se&&(u.handleBackdrop(!0),u.handleTextMessage("Updating local data... Please wait for a while"),he(c).then((function(e){console.log("Update completed!"),de("success","Update completed!"),x(te())})).finally((function(){u.handleBackdrop(!1),u.handleTextMessage("")})),le(void 0))}),[se,c,u]),r.a.useEffect((function(){(localStorage.noFirstVisit?localStorage.noFirstVisit:(console.log("first time"),localStorage.noFirstVisit="1",0))||X(!0)}),[]);var ue=function(){C(!1)},de=function(e,t){var n=e||"info",a=t||"Don't panic";L((function(e){return[].concat(Object(U.a)(e),[{severity:n,message:a,key:(new Date).getTime()}])}))};return Object(s.jsxs)("div",{children:[Object(s.jsx)(G.a,{position:"sticky",className:Object(Ae.a)(n.appBar,Object(P.a)({},n.appBarShift,j)),children:Object(s.jsx)(Ue.a,{children:Object(s.jsxs)(Ne.a,{container:!0,alignItems:"center",justify:"flex-start",spacing:1,children:[Object(s.jsx)(Ne.a,{container:!0,item:!0,justify:"flex-start",alignItems:"center",lg:4,md:5,xs:12,children:Object(s.jsx)(W,{setIsDrawerOpen:b,clsx:Ae.a,isDrawerOpen:j})}),Object(s.jsx)(Ne.a,{container:!0,item:!0,alignItems:"center",justify:"flex-start",lg:5,md:6,xs:12,children:Object(s.jsx)(Pe,{})}),Object(s.jsx)(Ne.a,{container:!0,item:!0,alignItems:"center",justify:e,xs:12,md:1,lg:3,children:Object(s.jsx)(ve,{onSetLastUpdateTime:function(){return x(te())},lastUpdateTime:O})})]})})}),Object(s.jsxs)(q.a,{className:n.drawer,variant:"persistent",anchor:"left",open:j,classes:{paper:n.drawerPaper},children:[Object(s.jsx)("div",{className:n.drawerHeader,children:Object(s.jsx)(A.a,{onClick:function(){return b(!1)},children:"ltr"===o.direction?Object(s.jsx)(E.a,{}):Object(s.jsx)(z.a,{})})}),Object(s.jsx)(H.a,{}),Object(s.jsxs)(ye.a,{children:[Object(s.jsx)(we.a,{button:!0,onClick:function(){return oe(!0)},disabled:!l,children:Object(s.jsx)(ke.a,{primary:"Update data"})}),Object(s.jsx)(we.a,{button:!0,onClick:function(){(function(){return re.apply(this,arguments)})().then((function(){return de("success","Clear completed!")})),ee(""),x(te())},disabled:!O,children:Object(s.jsx)(ke.a,{primary:"Clear data"})}),Object(s.jsx)(we.a,{button:!0,onClick:function(){return X(!0)},disabled:Q,children:Object(s.jsx)(ke.a,{primary:"Help"})})]}),Object(s.jsx)(H.a,{}),Object(s.jsxs)(y.a,{variant:"subtitle1",display:"block",gutterBottom:!0,className:n.content,color:"textSecondary",children:[Object(s.jsx)(Be.a,{children:"Last Update:"}),O?Ye(O):"No data"]})]}),Object(s.jsx)(Me.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:S,onClose:ue,autoHideDuration:3e3,children:Object(s.jsx)(We.a,{onClose:ue,severity:Y,elevation:6,variant:"filled",children:F})}),Object(s.jsx)(Ee,{open:Q,onClose:function(){X(!1)}}),Object(s.jsx)(Je,{open:ae,onClose:function(){return oe(!1)},onAgreed:function(e){return le(e)},children:Object(s.jsx)(y.a,{color:"textPrimary",children:"Depending on the quantity of items in your Google Photos Library, the updating time could be up to a few minutes. Are you sure to update?"})})]})}var Ke=n(83),$e=n(159),Qe=Object(w.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",overflow:"hidden",marginTop:"10px",marginLeft:"10px"},gridListTile:{maxWidth:480,maxHeight:360},image:{maxWidth:"100%","&:hover":{opacity:.5}},masonryGrid:{display:"flex",marginLeft:"-30px",width:"100%"},masonryGridColumn:{paddingLeft:"20px",backgroundClip:"padding-box","& > div":{marginBottom:"30px"}}}}));function Xe(e){var t=Qe(),n=Object(a.useState)(!0),r=Object(i.a)(n,2),o=r[0],c=r[1],l=T().photoUrls;Object(a.useEffect)((function(){var e=setTimeout((function(){c(!1)}),1200);return function(){return clearTimeout(e)}}),[]);return Object(s.jsx)("div",{className:t.root,children:o?Object(s.jsx)(Ne.a,{container:!0,spacing:1,children:e.ids.map((function(e){return Object(s.jsx)(Ne.a,{item:!0,xs:12,sm:6,md:4,lg:3,xl:2,children:Object(s.jsx)($e.a,{variant:"rect",height:300})},e)}))}):Object(s.jsx)(Ke.a,{breakpointCols:{default:6,1920:4,1280:3,960:2,600:1},className:t.masonryGrid,columnClassName:t.masonryGridColumn,children:e.ids.map((function(e,n){return Object(s.jsx)("img",{src:"".concat(l[n].baseUrl,"=w640-h640"),alt:"Google Photos",className:t.image,onClick:function(){return e=l[n].productUrl,void window.open(e);var e}},e)}))})})}var Ze=n(110),et=n(160),tt=Object(w.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},leftPadding:{paddingLeft:"15px"}}}));function nt(){var e=tt(),t=f().isBackdropOpened,n=f().textMessage;return Object(s.jsxs)(Ze.a,{className:e.backdrop,open:t,children:[Object(s.jsx)(et.a,{color:"inherit"}),Object(s.jsx)(y.a,{className:e.leftPadding,children:n})]})}var at=n(161),rt=n.p+"static/media/icons8-search-500.ff17960a.png",ot=Object(w.a)((function(e){return{root:{marginTop:"15px"}}}));function ct(){var e=ot(),t=f().isNoMatch,n=m().handleIsNoMatch,a=function(e,t){n(!1)};function r(e){return Object(s.jsx)(We.a,Object(D.a)(Object(D.a)({elevation:6,variant:"filled",onClick:a},e),{},{children:"Not Found"}))}return Object(s.jsx)("div",{children:Object(s.jsx)(Me.a,{anchorOrigin:{vertical:"center",horizontal:"center"},open:t,autoHideDuration:5e3,onClose:a,className:e.root,children:Object(s.jsx)(r,{severity:"warning"})})})}var it=Object(w.a)((function(e){return{main:{minHeight:"94vh"},centerText:{color:"#2d72bc",textDecoration:"none",fontWeight:"800",fontFamily:"Nunito, Helvetica, Arial, sans-serif",fontSize:"2em"},centerLayout:{position:"absolute",top:"50%",transform:"translateY(-50%)",width:"100%",display:"flex",alignItems:"center",justifyContent:"space-around"},image:Object(P.a)({maxWidth:"500px",maxHeight:"500px",width:"40%"},e.breakpoints.up("md"),{width:"20%"})}})),st=function(e){var t=it();return Object(s.jsx)("div",{className:t.centerText+" "+t.centerLayout,children:Object(s.jsx)("img",{src:rt,alt:"search-icon",className:t.image})})};function lt(){var e=it(),t=f().isSearching,n=T().searchedIds;return Object(s.jsxs)(Be.a,{className:e.main,children:[Object(s.jsx)(Ve,{}),n&&n.length?Object(s.jsx)(Xe,{ids:n}):Object(s.jsx)(st,{}),Object(s.jsx)(ct,{}),Object(s.jsx)(nt,{}),t?Object(s.jsx)(at.a,{}):null]})}function ut(){return Object(s.jsx)(p,{children:Object(s.jsx)(L,{children:Object(s.jsxs)(O,{children:[Object(s.jsx)(j.a,{}),Object(s.jsx)(lt,{}),Object(s.jsx)(S,{})]})})})}var dt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ht(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(ut,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/google-photos-search-enhancer",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/google-photos-search-enhancer","/service-worker.js");dt?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ht(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ht(t,e)}))}}()},79:function(e){e.exports=JSON.parse('{"a":{"client_id":"1021859068960-64oa03fggpfb22tau6tatqir94ft44vt.apps.googleusercontent.com","project_id":"search-chinese-1595873063241","auth_uri":"https://accounts.google.com/o/oauth2/auth","token_uri":"https://oauth2.googleapis.com/token","auth_provider_x509_cert_url":"https://www.googleapis.com/oauth2/v1/certs"}}')},99:function(e,t,n){}},[[107,1,2]]]);
//# sourceMappingURL=main.56a09ba5.chunk.js.map